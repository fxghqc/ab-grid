var ABGrid;!function(t){var i=function(){function t(){this.newRows=[],this.dirtyCells=[]}return t.prototype.whenRowAdded=function(t){this.isDirty=!0,this.hasNewRow=!0,this.newRows.push(t)},t.prototype.whenRowsRemoved=function(t){_.remove(this.newRows,function(i){return i===t}),_.remove(this.dirtyCells,function(i){return i.data===t}),this.newRows.length<1&&(this.hasNewRow=!1)},t.prototype.whenEdited=function(){this.isDirty=!0},t.prototype.dirtyCell=function(t,i){this.dirtyCells.push({colDef:t,data:i})},t.prototype.isDirtyCell=function(t,i){var r=_.findIndex(this.dirtyCells,{colDef:t,data:i});return r>=0},t}();t.GridStatus=i}(ABGrid||(ABGrid={}));var ABGrid;!function(t){var i=function(){function t(t){this.$window=t}return t.prototype.initialize=function(t){void 0===this.isPerfect&&this.$window.navigator.userAgent.indexOf("Mac")>=0&&(this.isPerfect=!0),this.isPerfect||this.$window.Ps.initialize(t)},t}();t.PsUtils=i}(ABGrid||(ABGrid={}));var ABGrid;!function(t){var i=function(){function t(t,i){this.$timeout=t,this.$window=i}return t.prototype.selectEditor=function(t){var i=this.$window.document.createElement("select"),r=this.$window.document.createElement("option");return r.setAttribute("value",""),r.innerHTML="-- 请选择 --",i.appendChild(r),t.forEach(function(t){var r=this.$window.document.createElement("option");r.setAttribute("value",t),r.innerHTML=t,i.appendChild(r)}),i.className="ag-cell-edit-select",i},t.prototype.resizeGrid=function(t,i){var r=this;this.$timeout(function(){t.sizeColumnsToFit(),i(),r.$timeout(function(){t.sizeColumnsToFit(),i()},10)})},t}();t.GridService=i}(ABGrid||(ABGrid={}));var ABGrid;!function(t){var i=angular.module("ABGrid",[]),r=function(){function t(t,i){var r=this;this.$log=t,this.PsUtils=i,this.restrict="E",this.transclude=!0,this.replace=!1,this.controller="ABGridCtrl",this.controllerAs="grid",this.scope={options:"=",status:"=",showFooter:"=",abSize:"@"},this.link=function(t,i,e){switch(r.$log.debug("init perfect scrollbar"),r.PsUtils.initialize(i[0].firstChild.querySelector(".ab-grid .ag-body-viewport")),e.abSize){case"small":i.addClass("ab-sm")}},this.template='<div class="panel panel-default ab-grid"><div class="panel-heading" ng-transclude></div><div class="panel-body"><div ag-grid="options" class="ag-fresh ag-noborder"></div></div><div class="panel-footer text-center" ng-show="showFooter"></div></div>'}return t}();t.ABGridDirective=r;var e=function(){function t(){this.require="^abGrid",this.restrict="E",this.transclude=!0,this.replace=!0,this.template='<div class="panel-heading-title" ng-transclude></div>'}return t}();t.ABGridTtile=e;var n=function(){function t(){this.require="^abGrid",this.restrict="E",this.transclude=!0,this.replace=!0,this.template='<div class="panel-heading-toolbox btn-group btn-group-sm" role="group" aria-label="..." ng-transclude></div>'}return t}();t.ABGridToolbox=n;var o=function(){function t(){this.require="^abGridToolbox",this.restrict="E",this.transclude=!0,this.replace=!0,this.scope={clickFun:"&btnClick"},this.template='<button type="button" class="btn btn-darkslategrey btn-clear" ng-click="clickFun()" ng-transclude></button>'}return t}();t.ABGridToolboxBtn=o;var s=function(){function t(){this.require="^abGridToolbox",this.restrict="E",this.transclude=!0,this.replace=!0,this.template='<span class="toolbox-delimiter"></span>'}return t}();t.ABGridToolboxDelimiter=s;var a=function(){function t(){this.require="^abGrid",this.restrict="E",this.replace=!0,this.controller=function(t,i){i.debug(t.$parent.options)},this.template='<form class="form-inline pull-right"><div class="form-group form-group-ssm has-feedback" id="attr-search"><label class="control-label sr-only" for="baseFilterText">Hidden label</label><input ng-model="$parent.options.quickFilterText" type="search" class="form-control" id="baseFilterText" aria-describedby="sensorFilterTextStatus"><span class="glyphicon glyphicon-search form-control-feedback" aria-hidden="true"></span><span id="sensorFilterTextStatus" class="sr-only">(success)</span></div></form>'}return t}();t.ABGridSearch=a;var l=function(){function t(t,i,r){this.$scope=t,this.GridStatus=i,this.$timeout=r;var e=new this.GridStatus;r(function(){t.options.api.status=e})}return t}();t.ABGridCtrl=l,i.controller("ABGridCtrl",["$scope","GridStatus","$timeout",t.ABGridCtrl]),i.factory("PsUtils",["$window",function(i){return new t.PsUtils(i)}]),i.factory("GridStatus",[function(){return t.GridStatus}]),i.factory("ABGrid",["$timeout","$window",function(i,r){return new t.GridService(i,r)}]),i.directive("abGrid",["$log","PsUtils",function(i,r){return new t.ABGridDirective(i,r)}]),i.directive("abGridTitle",[function(){return new t.ABGridTtile}]),i.directive("abGridToolbox",[function(){return new t.ABGridToolbox}]),i.directive("abGridToolboxBtn",[function(){return new t.ABGridToolboxBtn}]),i.directive("abGridToolboxDelimiter",[function(){return new t.ABGridToolboxDelimiter}]),i.directive("abGridSearch",[function(){return new t.ABGridSearch}])}(ABGrid||(ABGrid={}));var ABGrid;!function(t){var i=function(){function t(t,i,r){this.$log=t,this._=i,this.GridErrorProxy=r}return t.prototype.compareValue=function(t,i,r){},t.prototype.notNullValidation=function(t){var i=t.colDef.field,r=t.colDef.headerName,e=t.newValue,n=_.isEmpty(e),o=t.api;o.status.dirtyCell(t.colDef,t.data),n?(this.GridErrorProxy.addError(t.data,i,r,"不能为空"),o.scope.$apply()):(this.GridErrorProxy.removeError(t.data,i),o.scope.$apply()),o.refreshView()},t}();t.GridValidation=i}(ABGrid||(ABGrid={}));